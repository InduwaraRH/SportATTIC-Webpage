<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payment</title>
    <link rel="icon" href="../Images/Titleicon.png">
    <link rel="stylesheet" href="Main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
</head>
<body>
    <video autoplay muted loop id="myVideo">
        <source src="../Images/paymentback.mp4" type="video/mp4">
    </video>
    <header>
        <div class="payhead">
            <img class="logopay" src="../Images/VID.png" alt="Logo">
            <h2>PAYMENT DETAILS</h2>
        </div>
    </header>
    <form>
        <div class="formpay">
            <label for="firstname">First Name:</label>
            <input type="text" id="firstname" name="firstname" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="lastname">Last Name:</label>
            <input type="text" id="lastname" name="lastname" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="nic">NIC:</label>
            <input type="text" id="nic" name="nic" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="number">Phone Number:</label>
            <input type="tel" id="number" name="number" maxlength="10" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="code">Zip Code:</label>
            <input type="number" id="code" name="code" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="cardno">Card Number:<img id="cardpayment" src="../Images/Cardpayment.png" alt="visa"></label>
            <input type="number" id="cardno" name="cardno" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="expiry">Expiry:</label>
            <input type="month" id="expiry" name="expiry" class="inputpay" required>
        </div>
        <div class="formpay">
            <label for="cvv">CVV:</label>
            <input type="number" id="cvv" name="cvv" class="inputpay" required>
        </div>
        <h2 id="totalpay">Your total is: <span id="total"></span></h2>
        <div class="buttons-signup">
            <button class="button" onclick="window.location.href='shop.html'"><span class="paycon"></span>BACK</button>
            <button class="button" onclick="submitpay()"><span class="paycon"></span>PAY NOW</button>
            <button class="button" onclick= "reset()"><span class="paycon"></span>RESET</button>
        </div>
    </form>  
    <script>
        var params = new URLSearchParams(window.location.search);
        var total = params.get('total');
        document.getElementById('total').textContent = total;
        console.log(total)

        function reset(){
            document.getElementById("firstname").reset;
            document.getElementById("lastname").reset;
            document.getElementById("nic").reset;
            document.getElementById("email").reset;
            document.getElementById("number").reset;
            document.getElementById("address").reset;
            document.getElementById("code").reset;
            document.getElementById("cardno").reset;
            document.getElementById("expiry").reset;
            document.getElementById("cvv").reset;
        }

        function submitpay() {
            // get all form inputs
            var firstname = document.getElementById("firstname").value;
            var lastname = document.getElementById("lastname").value;
            var nic = document.getElementById("nic").value;
            var email = document.getElementById("email").value;
            var number = document.getElementById("number").value;
            var address = document.getElementById("address").value;
            var code = document.getElementById("code").value;
            var cardno = document.getElementById("cardno").value;
            var expiry = document.getElementById("expiry").value;
            var cvv = document.getElementById("cvv").value;
            
            // check if all required inputs are filled
            if (firstname === "" || lastname === "" || nic === "" || email === "" || number === "" || address === "" || code === "" || cardno === "" || expiry === "" || cvv === "") {
                alert("Please fill out all the required fields!");
            } else {
                setTimeout(function() {
                
                    alert("Thank you for shopping with us!");
                    const billingInfo={
                        firstname,
                        lastname,
                        email,
                        number,
                        address,
                        code
                    };
                    // Convert the object to a JSON string
                    const billingInfoJSON = JSON.stringify(billingInfo);
                    // Add the JSON string to the local storage
                    localStorage.setItem('billingInfo', billingInfoJSON);
                    window.location.href = 'checkout.html';
                });
            }
        }
    </script> 
</body>
</html>